properties:


  - name: lines
    type: std::vector<std::string>
    init_with: '{}'
    constructor_arg: true

  - name: current_line_num
    type: int
    init_with: -1

  - name: markers_index
    type: std::map<std::string, int>
    init_with: '{}'

  - name: initialized
    type: bool
    init_with: false


functions:


  - name: initialize
    guards: [ (!initialized) ]
    body: |
      build_markers_index();
      if (!lines.empty()) current_line_num = 0;
      initialized = true;
      return;


  - name: get_current_line_text
    guards: [ initialized ]
    type: std::string
    body: |
      if (!at_valid_line()) return "";
      return lines[current_line_num];


  - name: at_last_line
    guards: [ initialized ]
    type: bool
    body: |
      if (!lines.empty() && current_line_num == (lines.size()-1));


  - name: at_valid_line
    private: true
    type: bool
    body: |
      if (lines.empty()) return false;
      if (current_line_num < 0) return false;
      if (current_line_num >= lines.size()) return false;
      return true;


  - name: build_markers_index
    private: true
    body: |
      // TODO
      return;


dependencies:


  - symbol: std::map<std::string, int>
    headers: [ map, string ]



